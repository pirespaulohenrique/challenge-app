
> backend@0.0.1 test:e2e
> cross-env DATABASE_NAME=user_management jest --config ./test/jest-e2e.json

[Nest] 21560  - 18/12/2025, 15:37:29   ERROR [ExceptionsHandler] Provided "skip" value is not a number. Please provide a numeric value.
TypeORMError: Provided "skip" value is not a number. Please provide a numeric value.
    at SelectQueryBuilder.skip (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:1511:19)
    at SelectQueryBuilder.applyFindOptions (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:3280:22)
    at SelectQueryBuilder.setFindOptions (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:106:14)
    at EntityManager.findAndCount (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\entity-manager\EntityManager.ts:1153:14)
    at Repository.findAndCount (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\repository\Repository.ts:593:29)
    at UsersService.findAll (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\users\users.service.ts:46:54)
    at UsersController.findAll (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\users\users.controller.ts:34:30)
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-execution-context.js:38:29
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-execution-context.js:46:28
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-proxy.js:9:17
[Nest] 21560  - 18/12/2025, 15:37:29   ERROR [ExceptionsHandler] Provided "skip" value is not a number. Please provide a numeric value.
TypeORMError: Provided "skip" value is not a number. Please provide a numeric value.
    at SelectQueryBuilder.skip (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:1511:19)
    at SelectQueryBuilder.applyFindOptions (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:3280:22)
    at SelectQueryBuilder.setFindOptions (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:106:14)
    at EntityManager.findAndCount (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\entity-manager\EntityManager.ts:1153:14)
    at Repository.findAndCount (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\repository\Repository.ts:593:29)
    at UsersService.findAll (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\users\users.service.ts:46:54)
    at UsersController.findAll (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\users\users.controller.ts:34:30)
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-execution-context.js:38:29
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-execution-context.js:46:28
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-proxy.js:9:17
[Nest] 21560  - 18/12/2025, 15:37:29   ERROR [ExceptionsHandler] Provided "skip" value is not a number. Please provide a numeric value.
TypeORMError: Provided "skip" value is not a number. Please provide a numeric value.
    at SelectQueryBuilder.skip (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:1511:19)
    at SelectQueryBuilder.applyFindOptions (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:3280:22)
    at SelectQueryBuilder.setFindOptions (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\query-builder\SelectQueryBuilder.ts:106:14)
    at EntityManager.findAndCount (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\entity-manager\EntityManager.ts:1153:14)
    at Repository.findAndCount (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\repository\Repository.ts:593:29)
    at UsersService.findAll (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\users\users.service.ts:46:54)
    at UsersController.findAll (C:\Users\pires\Dev\1global\challenge\challenge-app\backend\src\users\users.controller.ts:34:30)
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-execution-context.js:38:29
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-execution-context.js:46:28
    at C:\Users\pires\Dev\1global\challenge\challenge-app\backend\node_modules\@nestjs\core\router\router-proxy.js:9:17
FAIL test/auth.e2e-spec.ts
  ΓùÅ Auth Controller (e2e) ΓÇ║ /auth/register (POST) ΓÇ║ should register a new user successfully

    expect(received).toEqual(expected) // deep equality

    Expected: "test_auth_user"
    Received: undefined

      53 |
      54 |       expect(response.body.user).toHaveProperty('id');
    > 55 |       expect(response.body.username).toEqual(validUser.username);
         |                                      ^
      56 |     });
      57 |
      58 |     it('should fail if username is too short', async () => {

      at Object.<anonymous> (auth.e2e-spec.ts:55:38)

FAIL test/users.e2e-spec.ts
  ΓùÅ Users Controller (e2e) ΓÇ║ GET /users ΓÇ║ should return paginated list (page 1)

    expected 200 "OK", got 500 "Internal Server Error"

      70 |         .get('/users?limit=5')
      71 |         .set('Authorization', `Bearer ${adminToken}`)
    > 72 |         .expect(200);
         |          ^
      73 |       expect(response.body.data.length).toBe(5);
      74 |       expect(response.body.meta.currentPage).toBe(1);
      75 |     });

      at Object.<anonymous> (users.e2e-spec.ts:72:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ΓùÅ Users Controller (e2e) ΓÇ║ GET /users ΓÇ║ should sort users by username ASC

    expected 200 "OK", got 500 "Internal Server Error"

      91 |         .get('/users?orderBy=username&order=ASC')
      92 |         .set('Authorization', `Bearer ${adminToken}`)
    > 93 |         .expect(200);
         |          ^
      94 |       const data = response.body.data;
      95 |       expect(
      96 |         data[0].username.localeCompare(data[1].username)

      at Object.<anonymous> (users.e2e-spec.ts:93:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ΓùÅ Users Controller (e2e) ΓÇ║ GET /users ΓÇ║ should sort users by createdAt DESC

    expected 200 "OK", got 500 "Internal Server Error"

      102 |         .get('/users?orderBy=createdAt&order=DESC')
      103 |         .set('Authorization', `Bearer ${adminToken}`)
    > 104 |         .expect(200);
          |          ^
      105 |
      106 |       const data = response.body.data;
      107 |       const date1 = new Date(data[0].createdAt).getTime();

      at Object.<anonymous> (users.e2e-spec.ts:104:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

Test Suites: 2 failed, 2 total
Tests:       4 failed, 14 passed, 18 total
Snapshots:   0 total
Time:        4.507 s, estimated 6 s
Ran all test suites.
